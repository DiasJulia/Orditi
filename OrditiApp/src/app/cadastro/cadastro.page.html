<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>

    <ion-title>Cadastrar Ambulante</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-button slot="end" color="medium" size="small">Adicionar Foto</ion-button>

  <div *ngIf="etapaCadastro == 1">
    <div class="centro">
      <img *ngIf="imgPessoa" class="conteudo" [src]="imgPessoa" (click)="cam(1)">
      <img *ngIf="imgDefaultP" class="conteudo" [src]="imgDefaultP" (click)="cam(1)">
    </div>



    <ion-card>
      <ion-card-header>
        <ion-card-subtitle>
          Dados Pessoais
        </ion-card-subtitle>
      </ion-card-header>

      <ion-item>
        <ion-label color="medium" position="floating">Nome:</ion-label>
        <ion-input type="text" [(ngModel)]="nome" placeholder="Ex.: Maria das Dores"></ion-input>
      </ion-item>
      <ion-item>
        <ion-label color="medium" position="floating">CPF/CNPJ:</ion-label>
        <ion-input type="text" [(ngModel)]="cpf" placeholder="123.456.789-10" [brmasker]="{person: true}"
          minlength="14">
        </ion-input>



      </ion-item>

      <ion-item>
        <ion-label color="medium" position="floating">RG:</ion-label>
        <ion-input type="text" [(ngModel)]="rg" placeholder="123.456.789-10">
        </ion-input>

      </ion-item>

      <ion-item>
        <ion-label color="medium" position="floating">Nome da Mãe:</ion-label>
        <ion-input type="text" [(ngModel)]="nomeMaterno" placeholder="Ex.: Glória das Dores" minlength="3"></ion-input>
      </ion-item>


      <ion-item>
        <ion-label color="medium" position="floating">CEP:</ion-label>
        <ion-input type="text" [(ngModel)]="cep" placeholder="Ex.: 57033-424" [brmasker]="{mask:'00000-000', len:9}"
          (focusout)="consultaCep(cep)" minlength="9"></ion-input>
      </ion-item>

      <ion-item>
        <ion-label color="medium" position="floating">Cidade:</ion-label>
        <ion-input type="text" [(ngModel)]="cidade" placeholder="Ex.: Maceió" minlength="3"></ion-input>
      </ion-item>

      <ion-item>
        <ion-label color="medium" position="floating">Bairro:</ion-label>
        <ion-input type="text" [(ngModel)]="bairro" placeholder="Ex.: Benedito Bentes" minlength="3"></ion-input>
      </ion-item>

      <ion-item>
        <ion-label color="medium" position="floating">Rua:</ion-label>
        <ion-input type="text" [(ngModel)]="rua" placeholder="Ex.: Senador Rui Palmeira" minlength="3"></ion-input>
      </ion-item>

      <ion-item>
        <ion-label color="medium" position="floating">N°:</ion-label>
        <ion-input type="number" [(ngModel)]="numero" placeholder="Ex.: 3" minlength="1"></ion-input>
      </ion-item>


      <ion-item>
        <ion-label color="medium" position="floating">N° de Contato:</ion-label>
        <ion-input type="text" [(ngModel)]="fone" placeholder="Ex.: (12) 984567-8910" [brmasker]="{phone: true}"
          minlength="14"></ion-input>
      </ion-item>

      <ion-item>
        <ion-label color="medium" position="floating">Email:</ion-label>
        <ion-input type="email" [(ngModel)]="email" placeholder="Ex.: exemplo@email.com" ></ion-input>
      </ion-item>


    </ion-card>

    <ion-card>
      <ion-card-header>
        <ion-card-subtitle>
          Fotos dos Documentos
        </ion-card-subtitle>
      </ion-card-header>

      <ion-item>
        <ion-label color="medium">
          CPF/CNPJ </ion-label>
        <ion-button slot="end" color="medium" size="small" (click)="cam(3)">Adicionar</ion-button>


      </ion-item>

      <ion-item>
        <ion-label color="medium">RG</ion-label>
        <ion-button slot="end" color="medium" size="small" (click)="cam(4)">Adicionar</ion-button>
      </ion-item>
    </ion-card>


    <ion-button expand="block" color="medium" (click)="verifiEtapa(1)">
      Seguinte
    </ion-button>
  </div>
  <div *ngIf="etapaCadastro == 2">

    <ion-card>
      <ion-card-header>
        <ion-card-subtitle>
          Horário
        </ion-card-subtitle>
      </ion-card-header>




      <ion-item>
        <ion-label color="medium" position="floating">Dias:</ion-label>
        <ion-select multiple="true" [(ngModel)]="diasAtend" placeholder="Ex.: Segunda">
          <ion-select-option value=" Segunda-feira">Segunda-feira</ion-select-option>
          <ion-select-option value=" Terça-feira">Terça-feira</ion-select-option>
          <ion-select-option value=" Quarta-feira">Quarta-feira</ion-select-option>
          <ion-select-option value=" Quinta-feira">Quinta-feira</ion-select-option>
          <ion-select-option value=" Sexta-feira">Sexta-feira</ion-select-option>
          <ion-select-option value=" Sabado">Sabado</ion-select-option>
          <ion-select-option value=" Domingo">Domingo</ion-select-option>

        </ion-select>
      </ion-item>

      <ion-item>
        <ion-label color="medium" position="floating">Início</ion-label>
        <ion-datetime display-format="HH:mm" cancelText="Cancelar" doneText="Escolher" ([ngModel])="hInicio"
          placeholder="Ex.: 15:00" (ionChange)="horaInicio( $event )">
        </ion-datetime>
      </ion-item>
      <ion-item>
        <ion-label color="medium" position="floating">Fim</ion-label>
        <ion-datetime display-format="HH:mm" cancelText="Cancelar" doneText="Escolher" ([ngModel])="hfim"
          placeholder="Ex.: 18:30" (ionChange)="horaFim( $event )">
        </ion-datetime>
      </ion-item>
    </ion-card>
    <ion-card>
      <ion-card-header>
        <ion-card-subtitle>
          Tipo de Atividade
        </ion-card-subtitle>
      </ion-card-header>

      <ion-item>
        <ion-label color="medium" position="floating">Relatar atividade:</ion-label>
        <ion-textarea [(ngModel)]="relatoAtividade" rows="8" cols="15" placeholder="Atividade a ser Desenvolvida">
        </ion-textarea>
      </ion-item>

      <ion-item>
        <ion-label color="medium" position="floating">Produto e/ou Serviço:</ion-label>
        <ion-input type="text" [(ngModel)]="produto" placeholder="Ex.: Churros"></ion-input>
      </ion-item>

    </ion-card>

    <ion-card>

      <ion-card-header>
        <ion-card-subtitle>
          Endereço
        </ion-card-subtitle>
      </ion-card-header>


      <ion-item>
        <ion-label color="medium" position="floating">Região</ion-label>
        <ion-select placeholder="Selecione a zona" [(ngModel)]="regiao">
          <ion-select-option value="a1">Ponto Independente</ion-select-option>
          <ion-select-option *ngFor="let lugar of locais | async" value="{{lugar.nome}}">{{lugar.nome}}
          </ion-select-option>

        </ion-select>
      </ion-item>

      <ion-item>
        <ion-label color="medium" position="floating">Ponto de referência:</ion-label>
        <ion-input type="text" [(ngModel)]="pontoRef" placeholder="Ex.: Enfrente à Praça Lions"></ion-input>
      </ion-item>


      <div *ngIf="regiao == 'a1'">
        <ion-item (click)="leafletMap()">
          <ion-label color="medium" position="floating">Local de Atividade:</ion-label>
          <ion-input type="text" [(ngModel)]="localAtiv" disabled="{{mostrarMapa}}"
            placeholder="Ex.: R. Jagandeiros Alagoanos - Ponta Verde">
            <!--Poe isso aqui pra ser aquela coisinha de buscar o endereco -->
          </ion-input>
          <ion-note text-end (click)="leafletMap()">
            Marque no mapa
          </ion-note>
        </ion-item>
      </div>
    </ion-card>

    <ion-card *ngIf="mostrarMapa" id="mapId3" style="height: 300px">
    </ion-card>

    <ion-card *ngIf="cpf">
      <ion-card-header>
        <ion-card-subtitle>qrCode Do Ambulante</ion-card-subtitle>
      </ion-card-header>
      <br>

      <ngx-qrcode class="ion-text-center" qrc-element-type="canvas" [qrc-value]="cpf">
      </ngx-qrcode>

    </ion-card>

    <ion-card>
      <ion-card-header>
        <ion-card-subtitle>
          Foto do carrinho
        </ion-card-subtitle>
      </ion-card-header>

      <ion-item>
        <ion-label color="medium">
          Imagem </ion-label>
        <ion-button slot="end" color="medium" size="small" (click)="cam(2)">Adicionar</ion-button>


      </ion-item>

    </ion-card>

    <ion-button expand="block" fill="outline" color="medium" (click)="verifiEtapa(2)">
      Voltar
    </ion-button>

    <ion-button expand="block" color="medium" (click)="cadastrar()">
      Solicitar Cadastro
    </ion-button>
  </div>